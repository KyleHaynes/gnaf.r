# gnaf.r

An R package to assist with importing G-NAF into R.

## What is G-NAF?

G-NAF is Australia's most trusted authoritative (g)eocoded (n)ational (a)ddress (f)ile.

More from: https://psma.com.au/product/gnaf/

PSMA's G-NAF dataset contains all physical addresses in Australia. It's the most trusted source of geocoded addresses for Australian businesses and governments.

## Where to get G-NAF?
G-NAF is released on a quarterly basis and is available from here:
https://data.gov.au/dataset/ds-dga-19432f89-dc3a-4ef3-b943-5326ef1dbecc/details?q=G-NAF

## What is this repo?
A set of convenience functions to assist with importing G-NAF in to R.

## Dependencies required for these function
- R
- Download G-NAF
- Depending on which function used, RAM.

### Installation of the package

The package is not on CRAN.

```R
# Install `remotes` if it isn't installed.
if(!any(installed.packages()[,1] == "remotes")) install.packages("remotes")

# Install the gnaf.r package.
remotes::install_github("KyleHaynes/gnaf.r")
```

## Basic usage

1. Download G-NAF from data.gov.au: https://data.gov.au/dataset/ds-dga-19432f89-dc3a-4ef3-b943-5326ef1dbecc/details?q=G-NAF
    * File is 1.5GB compressed / 7.7GB uncompressed
2. Extract the context of the compressed download to a desired location.
3. Note down the location of extracted directory (and the sibling month/year folder). E.g. "C:/temp/G-NAF/G-NAF FEBRUARY 2020".
4. From R:

```R
# Load the package.
library("gnaf.r")

# Setup the session before importing G-NAF. This step has two primary purposes.
    # 1. Define the location of the G-NAF root path (./G-NAF <MONTH> <YEAR>).
    # 2. Define which jurisdictions to import.
setup(dir = "C:/temp/G-NAF/G-NAF FEBRUARY 2020",
      states = "tas|act")

# Import G-NAF for Tasmania & the ACT.
gnaf <- build_gnaf()

# Import again, defining `simple = TRUE` to remove potential non-address related variables (i.e reduce the output).
gnaf_simple <- build_gnaf(simple = TRUE)

str(gnaf)
    # Classes ‘data.table’ and 'data.frame':  590395 obs. of  48 variables:
    #  $ ADDRESS_DETAIL_PID                   : chr  "GAACT714845933" "GAACT714845934" "GAACT714845935" "GAACT714845936" ...
    #  $ STREET_LOCALITY_PID                  : chr  "ACT3857" "ACT3807" "ACT3833" "ACT3826" ...
    #  $ LOCALITY_PID                         : chr  "ACT570" "ACT570" "ACT570" "ACT570" ...
    #  $ BUILDING_NAME                        : chr  "" "" "" "" ...
    #  $ LOT_NUMBER                           : int  NA NA NA NA NA NA NA NA NA NA ...
    #  $ FLAT_NUMBER_PREFIX                   : chr  "" "" "" "" ...
    #  $ FLAT_NUMBER                          : int  NA NA NA NA NA NA NA NA NA NA ...
    #  $ FLAT_NUMBER_SUFFIX                   : chr  "" "" "" "" ...
    #  $ LEVEL_NUMBER_PREFIX                  : chr  "" "" "" "" ...
    #  $ LEVEL_NUMBER                         : int  NA NA NA NA NA NA NA NA NA NA ...
    #  $ NUMBER_FIRST_PREFIX                  : chr  NA NA NA NA ...
    #  $ NUMBER_FIRST                         : int  6 3 26 17 5 24 7 5 22 9 ...
    #  $ NUMBER_FIRST_SUFFIX                  : chr  "" "" "" "" ...
    #  $ NUMBER_LAST                          : int  NA NA NA NA NA NA NA NA NA NA ...
    #  $ NUMBER_LAST_SUFFIX                   : chr  NA NA NA NA ...
    #  $ ALIAS_PRINCIPAL                      : chr  "P" "P" "P" "P" ...
    #  $ POSTCODE                             : int  2615 2615 2615 2615 2902 2615 2902 2615 2615 2902 ...
    #  $ LEGAL_PARCEL_ID                      : chr  "BELC/CHAR/15/16/" "BELC/CHAR/17/2/" "BELC/CHAR/83/3/" "BELC/CHAR/29/9/" ...
    #  $ CONFIDENCE                           : int  2 2 2 2 2 2 2 2 2 2 ...
    #  $ ADDRESS_SITE_PID                     : int  710446419 710446420 710446421 710446422 710446424 710446425 710446427 710446428 710446429 710446430 ...
    #  $ LEVEL_GEOCODED_CODE                  : int  7 7 7 7 7 7 7 7 7 7 ...
    #  $ GNAF_PROPERTY_PID                    : chr  "1026280" "1026283" "351430" "343650" ...
    #  $ PRIMARY_SECONDARY                    : chr  "" "" "" "" ...
    #  $ LOCALITY_NAME                        : chr  "CHARNWOOD" "CHARNWOOD" "CHARNWOOD" "CHARNWOOD" ...
    #  $ PRIMARY_POSTCODE                     : int  NA NA NA NA NA NA NA NA NA NA ...
    #  $ GNAF_LOCALITY_PID                    : int  500219587 500219587 500219587 500219587 500219628 500219587 500219628 500219587 500219587 500219628 ...
    #  $ GNAF_RELIABILITY_CODE                : int  5 5 5 5 5 5 5 5 5 5 ...
    #  $ STREET_NAME                          : chr  "PACKHAM" "BUNKER" "JAUNCEY" "GEEVES" ...
    #  $ STREET_TYPE                          : chr  "PLACE" "PLACE" "COURT" "COURT" ...
    #  $ GNAF_STREET_PID                      : int  502493439 502490407 502492206 502491587 502492926 502492206 502492926 502490407 502492206 502492926 ...
    #  $ GNAF_STREET_CONFIDENCE               : int  2 2 2 -1 2 2 2 2 2 2 ...
    #  $ GNAF_RELIABILITY_CODE_street_locality: int  4 4 4 4 4 4 4 4 4 4 ...
    #  $ STATE_NAME                           : chr  "AUSTRALIAN CAPITAL TERRITORY" "AUSTRALIAN CAPITAL TERRITORY" "AUSTRALIAN CAPITAL TERRITORY" "AUSTRALIAN CAPITAL TERRITORY" ...
    #  $ ADDRESS_DEFAULT_GEOCODE_PID          :integer64 3006501997 3006502410 3006610521 3006506877 3006499300 3006448778 3006616267 3006485909 ... 
    #  $ GEOCODE_TYPE_CODE                    : chr  "FCS" "FCS" "FCS" "FCS" ...
    #  $ LONGITUDE                            : num  149 149 149 149 149 ...
    #  $ LATITUDE                             : num  -35.2 -35.2 -35.2 -35.2 -35.4 ...
    #  $ ADDRESS_MESH_BLOCK_2011_PID          : chr  "ACT43994755" "ACT43994756" "ACT43994757" "ACT43994758" ...
    #  $ MB_MATCH_CODE                        : int  1 1 1 1 1 1 1 1 1 1 ...
    #  $ MB_2011_CODE                         : chr  "80006300000" "80006310000" "80006380000" "80006280000" ...
    #  $ ADDRESS_MESH_BLOCK_2016_PID          : chr  "ACT1547490736" "ACT1547490737" "ACT1547490738" "ACT1547490739" ...
    #  $ MB_MATCH_CODE_locality               : int  1 1 1 1 1 1 1 1 1 1 ...
    #  $ MB_2016_CODE                         : chr  "80006300000" "80006310000" "80006380000" "80006280000" ...
    #  $ STREET_SUFFIX                        : chr  NA NA NA NA ...
    #  $ FLAT_TYPE                            : chr  NA NA NA NA ...
    #  $ LEVEL_TYPE                           : chr  NA NA NA NA ...
    #  $ LOCALITY_CLASS                       : chr  "GAZETTED LOCALITY" "GAZETTED LOCALITY" "GAZETTED LOCALITY" "GAZETTED LOCALITY" ...
    #  $ STREET_CLASS                         : chr  "CONFIRMED" "CONFIRMED" "CONFIRMED" "CONFIRMED" ...
    #  - attr(*, ".internal.selfref")=<externalptr> 
    #  - attr(*, "sorted")= chr "ADDRESS_DETAIL_PID"

```